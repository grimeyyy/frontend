<div class="container">
  <div class="row justify-content-center">
    <div class="col-12" [ngStyle]="{maxWidth: maxWidthRem + 'rem'}">
      <h1 class="fs-1 text-center mb-4">{{ heading | translate }}</h1>
      <form [formGroup]="formGroup" (ngSubmit)="onSubmit()" class="mb-5">
        <div class="mb-4">
          <ng-container *ngFor="let field of fields">
            <label [for]="field.name" class="form-label w-100">
              {{ field.translateKey ? (field.translateKey | translate) : field.label }}
              <input
                [id]="field.id"
                [type]="field.type"
                class="form-control form-control-lg"
                [formControlName]="field.name"
                [attr.aria-describedby]="field.id + 'Help'"
                [ngClass]="{ 'is-invalid': formGroup.get(field.name)?.invalid && formGroup.get(field.name)?.touched }"
              />
            </label>
            <div class="invalid-feedback d-inline-block mb-2" *ngIf="formGroup.get(field.name)?.touched && formGroup.get(field.name)?.errors">
              <ng-container *ngIf="formGroup.get(field.name)?.errors?.['required']">
                {{ 'ERROR.REQUIRED_FIELD' | translate }}
              </ng-container>
              <ng-container *ngIf="formGroup.get(field.name)?.errors?.['email']">
                {{ 'ERROR.INVALID_EMAIL' | translate }}
              </ng-container>
              <ng-container *ngIf="formGroup.get(field.name)?.errors?.['minlength']">
                {{ 'ERROR.MINLENGTH' | translate:{requiredLength: formGroup.get(field.name)?.errors?.['minlength'].requiredLength} }}
              </ng-container>
              <ng-container *ngIf="formGroup.get(field.name)?.errors?.['passwordMismatch']">
                {{ 'ERROR.PASSWORD_MISMATCH' | translate }}
              </ng-container>
            </div>
          </ng-container>

        </div>

        <button type="submit" [disabled]="formGroup.invalid" class="btn btn-secondary w-100">
          {{ submitText | translate }}
        </button>
      </form>
      <app-generic-alert *ngIf="successMessage"
                 [type]="'success'"
                 [message]="successMessage"
                 [args]="successMessageArgs">
      </app-generic-alert>
      <app-generic-alert *ngIf="errorMessage"
                 [type]="'danger'"
                 [message]="errorMessage"
                 [args]="errorMessageArgs">
      </app-generic-alert>
    </div>
  </div>
  <div class="mt-3 text-center fs-6">
    <p class="fs-6 w-100" *ngFor="let link of formLinks">
      {{ link.helpText | translate }}
      <a routerLink="{{link.href}}" class="text-decoration-none">{{ link.linkText | translate }}</a>
    </p>
  </div>
</div>
